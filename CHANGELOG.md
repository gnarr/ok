# Changelog

All notable changes to this project will be documented in this file.

## [0.3.0] - 2025-04-27

### ğŸš€ Features

- Respond with 404 to unknown paths
- Add `SHOW_FAVICON` environment variable with default value of `true`
- Use `sync_channel` for logs with try_send
- THREAD_POOL_SIZE is now configurable via env
- Respond correctly to HEAD requests

### ğŸ› Bug Fixes

- Do not attempt to consume body on GET for / or /favicon.ico
- Avoid per-line heap allocations when parsing Content-Length
- Gracefully handle a disconnected worker queue
- Validate PORT env var before binding
- Handle try_send errors explicitly
- Return 501 for unsupported HTTP methods

### ğŸšœ Refactor

- Simplify get_client_address
- Simplify sanitize method
- Use format macro instead of string.into
- Use string.into for port default value
- Use match ok/err for getting content-length header

### âš¡ Performance

- Skip allocating on heap for method and path
- Add 24h caching header for favicon

### âš™ï¸ Miscellaneous Tasks

- Formatting fixes

## [0.2.0] - 2025-04-25

### ğŸš€ Features

- Add request logging
- Add favicon
- Create a thread pool with 4 threads
- Better error responses
- Add `X-Content-Type-Options` and `X-Frame-Options` security headers
- Sanitize request_line before printing to logs
- Get client ip-address from X-Forwarded-For with fallback to stream.peer_addr
- Switch to per-worker bounded channels and round-robin dispatch
- Connection handling panic isolation
- Reject chunked encoding
- Logger thread to prevent log message intermixing

### ğŸ› Bug Fixes

- Potential Slowloris attacks
- Improve performance by having a fixed size buffer for reading
- Improve Slowloris mitigation
- Mitigate TCP receive buffer stalling attacks
- Use sync_channel with queue capacity of 100
- Log dropped connections
- Return error on when remaining > 0 and n == 0
- Parse headers in lower-case
- Treat premature EOF while reading headers as an error, not success

### ğŸšœ Refactor

- Add generalized write_response method

### âš¡ Performance

- Pre-build byte slices

### âš™ï¸ Miscellaneous Tasks

- Update changelog for v0.2.0
- Release ok version 0.2.0

## [0.1.10] - 2025-04-23

### ğŸ› Bug Fixes

- Use distroless/cc instead of distroless/static

### âš™ï¸ Miscellaneous Tasks

- Update changelog for v0.1.10
- Release ok version 0.1.10

## [0.1.9] - 2025-04-23

### ğŸ› Bug Fixes

- Set ok_server executable

### âš™ï¸ Miscellaneous Tasks

- Update changelog for v0.1.9
- Release ok version 0.1.9

## [0.1.8] - 2025-04-23

### ğŸ› Bug Fixes

- User hard-coded binary name

### âš™ï¸ Miscellaneous Tasks

- Update changelog for v0.1.8
- Release ok version 0.1.8

## [0.1.7] - 2025-04-23

### âš™ï¸ Miscellaneous Tasks

- Remove actions-rs/toolchain@v1
- Update changelog for v0.1.7
- Release ok version 0.1.7

## [0.1.6] - 2025-04-23

### ğŸ› Bug Fixes

- Name extraction for Windows build

### âš™ï¸ Miscellaneous Tasks

- Update changelog for v0.1.6
- Release ok version 0.1.6

## [0.1.5] - 2025-04-23

### ğŸ› Bug Fixes

- Only move the file

### âš™ï¸ Miscellaneous Tasks

- Update changelog for v0.1.5
- Release ok version 0.1.5

## [0.1.4] - 2025-04-23

### ğŸ› Bug Fixes

- Remove TARGETARCH override and correct arm-v7 binary name

### âš™ï¸ Miscellaneous Tasks

- Update changelog for v0.1.4
- Release ok version 0.1.4

## [0.1.3] - 2025-04-23

### ğŸ› Bug Fixes

- Update Dockerfile to handle TARGETVARIANT

### âš™ï¸ Miscellaneous Tasks

- Update changelog for v0.1.3
- Release ok version 0.1.3

## [0.1.2] - 2025-04-22

### ğŸ› Bug Fixes

- *(ci)* Release needed for docker_image step

### âš™ï¸ Miscellaneous Tasks

- Update changelog for v0.1.2
- Release ok version 0.1.2

## [0.1.1] - 2025-04-22

### âš™ï¸ Miscellaneous Tasks

- Init
- Update changelog for v0.1.1
- Release ok version 0.1.1

<!-- generated by git-cliff -->
